# ElastiQuest 启动说明

## 🚀 快速启动

### 方式一：一键启动（推荐）

**Windows**:
```bash
start.bat
```

**Linux/Mac**:
```bash
chmod +x start.sh
./start.sh
```

### 方式二：分别启动

**前端**:
```bash
cd frontend
npm run dev
```

**后端**:
```bash
cd backend
# Windows
scripts\dev-with-ip.bat

# Linux/Mac
chmod +x scripts/dev-with-ip.sh
scripts/dev-with-ip.sh
```

## 📱 访问地址

启动后会显示类似以下信息：

```
╔════════════════════════════════════════════════════════════╗
║                  ElastiQuest 前端服务                      ║
╚════════════════════════════════════════════════════════════╝

🌐 访问地址:
   - Local:   http://localhost:3000
   - Network: http://10.10.0.153:3000 (以太网)
   - Network: http://192.168.1.100:3000 (WLAN)

📝 提示:
   - 按 Ctrl+C 停止服务
   - 后端服务需要在 http://localhost:8080 运行
   - RAG 功能需要配置 backend/.env 文件中的 LLM_API_KEY
```

## 🌐 局域网访问

现在你可以通过局域网 IP 访问应用：

- **同一局域网的其他设备**可以通过显示的 Network 地址访问
- 例如：手机、平板、其他电脑等
- 确保防火墙允许 3000 和 8080 端口

## 🔧 配置说明

### 首次启动

1. 脚本会自动检查 `backend/.env` 文件
2. 如果不存在，会自动从 `.env.example` 复制
3. **重要**：需要手动编辑 `backend/.env` 填入 `LLM_API_KEY`

### 环境变量

编辑 `backend/.env`:
```bash
# 模力方舟 LLM API 配置
LLM_API_KEY=your-actual-api-key-here

# Elasticsearch 配置（可选）
ELASTICSEARCH_HOST=localhost
ELASTICSEARCH_PORT=9200
```

## 📝 脚本说明

### 前端启动脚本

- **npm run dev**: 使用增强版启动（显示 IP 地址）
- **npm run dev:simple**: 使用原始 Next.js 启动

### 后端启动脚本

- **scripts/dev-with-ip.bat** (Windows): 显示 IP 地址的启动脚本
- **scripts/dev-with-ip.sh** (Linux/Mac): 显示 IP 地址的启动脚本

## 🎯 功能特性

### 显示的信息

- ✅ 本地访问地址 (localhost)
- ✅ 局域网访问地址（所有网卡的 IP）
- ✅ 网卡名称（以太网、WLAN 等）
- ✅ API 文档地址
- ✅ 配置提示

### 自动化功能

- ✅ 自动检查并创建 .env 文件
- ✅ 自动获取本机所有 IP 地址
- ✅ 自动过滤回环地址
- ✅ 美化的启动信息显示

## 🐛 故障排查

### 端口被占用

如果提示端口被占用：

**Windows**:
```bash
# 查看占用 3000 端口的进程
netstat -ano | findstr :3000

# 结束进程（替换 PID）
taskkill /PID <PID> /F
```

**Linux/Mac**:
```bash
# 查看占用 3000 端口的进程
lsof -i :3000

# 结束进程
kill -9 <PID>
```

### 无法访问局域网地址

1. 检查防火墙设置
2. 确保设备在同一局域网
3. 尝试关闭防火墙测试

**Windows 防火墙**:
```bash
# 允许 3000 端口
netsh advfirewall firewall add rule name="ElastiQuest Frontend" dir=in action=allow protocol=TCP localport=3000

# 允许 8080 端口
netsh advfirewall firewall add rule name="ElastiQuest Backend" dir=in action=allow protocol=TCP localport=8080
```

### 看不到 IP 地址

如果启动后没有显示 Network 地址：

1. 检查网络连接
2. 确保已连接到网络（有线或无线）
3. 查看网络适配器设置

## 💡 使用技巧

### 移动端测试

1. 确保手机和电脑在同一 WiFi
2. 使用显示的 Network 地址访问
3. 例如：http://10.10.0.153:3000

### 团队协作

1. 分享你的 Network 地址给团队成员
2. 团队成员可以直接访问你的开发环境
3. 适合演示和测试

### 多设备调试

1. 同时在电脑、手机、平板上测试
2. 观察不同设备的显示效果
3. 测试响应式设计

## 📚 更多文档

- [快速开始](QUICK_START.md)
- [完整 README](README.md)
- [环境变量配置](backend/README_ENV.md)

