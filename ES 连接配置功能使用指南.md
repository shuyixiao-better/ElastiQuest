# ES 连接配置功能使用指南

## 功能概述

现在你可以在 `http://localhost:3000/config` 页面配置和管理 Elasticsearch 连接了！

## 功能特性

### 1. 添加 ES 连接配置
- 配置名称：为你的连接起一个易识别的名字
- 主机地址：ES 服务器的地址（如 localhost 或 IP 地址）
- 端口：ES 服务端口（默认 9200）
- 协议：HTTP 或 HTTPS
- 用户名/密码：如果 ES 需要认证
- 环境：开发环境、测试环境或生产环境

### 2. 连接列表管理
- 查看所有已配置的连接
- 测试连接是否可用
- 设置活动连接
- 删除不需要的连接

### 3. 连接测试
- 点击"测试连接"按钮可以验证配置是否正确
- 测试成功会显示集群名称和 ES 版本
- 测试失败会显示错误信息

## 使用步骤

### 步骤 1：访问配置页面
打开浏览器访问：`http://localhost:3000/config`

### 步骤 2：添加新连接
1. 点击"添加连接"标签页
2. 填写连接信息：
   - **配置名称**：例如"本地 ES"
   - **主机地址**：例如 `localhost`
   - **端口**：`9200`（默认）
   - **协议**：选择 `HTTP` 或 `HTTPS`
   - **用户名**（可选）：如果需要认证
   - **密码**（可选）：如果需要认证
   - **环境**：选择环境类型
3. 点击"添加配置"按钮

### 步骤 3：测试连接
1. 在"连接列表"标签页中找到你的配置
2. 点击"测试连接"按钮
3. 等待测试结果：
   - ✅ 成功：显示集群名称和版本
   - ❌ 失败：显示错误信息

### 步骤 4：设置活动连接
1. 在连接列表中找到要使用的连接
2. 点击"设为活动"按钮
3. 该连接会被标记为"活动"状态

## 示例配置

### 本地 Elasticsearch（无认证）
```
配置名称：本地 ES
主机地址：localhost
端口：9200
协议：HTTP
环境：开发环境
```

### 远程 Elasticsearch（有认证）
```
配置名称：生产环境 ES
主机地址：192.168.1.100
端口：9200
协议：HTTPS
用户名：elastic
密码：your_password
环境：生产环境
```

### Elastic Cloud
```
配置名称：Elastic Cloud
主机地址：your-deployment.es.cloud.elastic.co
端口：9243
协议：HTTPS
用户名：elastic
密码：your_cloud_password
环境：生产环境
```

## 技术实现

### 后端 API
- **测试连接**：`POST /api/es-connection/test`
- **健康检查**：`GET /api/es-connection/health`

### 前端组件
- `ESConnectionForm`：连接配置表单
- `ESConnectionList`：连接列表展示
- `ConfigPage`：配置页面主组件

### 数据存储
- 使用 Zustand 进行状态管理
- 配置数据持久化到浏览器 localStorage
- 键名：`elasticquest-store`

## 常见问题

### Q: 测试连接失败怎么办？
A: 请检查：
1. ES 服务是否正在运行
2. 主机地址和端口是否正确
3. 如果使用认证，用户名和密码是否正确
4. 防火墙是否允许连接

### Q: 配置数据存储在哪里？
A: 配置数据存储在浏览器的 localStorage 中，不会发送到服务器。

### Q: 可以配置多个连接吗？
A: 可以！你可以配置多个连接，并在它们之间切换。

### Q: 如何删除配置？
A: 在连接列表中，点击配置卡片右上角的删除图标（垃圾桶）。

## 下一步

配置好 ES 连接后，你可以：
1. 开始学习 CRUD 操作任务
2. 使用查询构建器
3. 查看成就系统

祝你学习愉快！🎉

